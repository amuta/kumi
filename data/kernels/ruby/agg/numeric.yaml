kernels:
  - id: agg.sum:ruby:v1
    fn: agg.sum
    inline: "+= $1"
    impl: "(a,b)\n  a + b"
    fold_inline: "= $0.sum"
    identity: 
      float: 0.0
      integer: 0
      
  - id: agg.count:ruby:v1
    fn: agg.count
    inline: "+= 1"
    impl: "(a,_b)\n  a + 1"
    fold_inline: "= $0.count"
    identity:
      any: 0

  - id: agg.min:ruby:v1
    fn: agg.min
    inline: "= $1 if $1 < $0" 
    impl: "(a, b)\n  a < b ? a : b"
    fold_inline: "= $0.min"

  - id: agg.max:ruby:v1
    fn: agg.max
    inline: "= $1 if $1 > $0" 
    impl: "(a, b)\n  a > b ? a : b"
    fold_inline: "= $0.max"