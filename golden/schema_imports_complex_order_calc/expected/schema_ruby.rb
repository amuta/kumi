# Autogenerated by Kumi Codegen
module Kumi::Compiled::KUMI_1099ce45f52614652b4c8220780498c88cd3640a1c41a254fbde037369b646e4
  def self._order_subtotals(input)
    out = []
    t1 = input["orders"] || input[:orders]
    t1.each_with_index do |orders_el_2, orders_i_3|
      t4 = orders_el_2["items"] || orders_el_2[:items]
      t5 = Kumi::TestSharedSchemas::Subtotal._subtotal({"items" => t4})
      out << t5
    end
    out
  end

  def self._order_with_shipping(input)
    out = []
    t6 = input["orders"] || input[:orders]
    t6.each_with_index do |orders_el_7, orders_i_8|
      t60 = orders_el_7["items"] || orders_el_7[:items]
      t10 = orders_el_7["shipping_cost"] || orders_el_7[:shipping_cost]
      t61 = Kumi::TestSharedSchemas::Subtotal._subtotal({"items" => t60})
      t11 = t61 + t10
      out << t11
    end
    out
  end

  def self._order_discounted(input)
    out = []
    t12 = input["orders"] || input[:orders]
    t16 = input["global_discount_rate"] || input[:global_discount_rate]
    t12.each_with_index do |orders_el_13, orders_i_14|
      t67 = orders_el_13["items"] || orders_el_13[:items]
      t64 = orders_el_13["shipping_cost"] || orders_el_13[:shipping_cost]
      t68 = Kumi::TestSharedSchemas::Subtotal._subtotal({"items" => t67})
      t65 = t68 + t64
      t17 = Kumi::TestSharedSchemas::Discount._discounted({"price" => t65, "rate" => t16})
      out << t17
    end
    out
  end

  def self._order_tax(input)
    out = []
    t18 = input["orders"] || input[:orders]
    t71 = input["global_discount_rate"] || input[:global_discount_rate]
    t18.each_with_index do |orders_el_19, orders_i_20|
      t78 = orders_el_19["items"] || orders_el_19[:items]
      t75 = orders_el_19["shipping_cost"] || orders_el_19[:shipping_cost]
      t79 = Kumi::TestSharedSchemas::Subtotal._subtotal({"items" => t78})
      t76 = t79 + t75
      t72 = Kumi::TestSharedSchemas::Discount._discounted({"price" => t76, "rate" => t71})
      t22 = Kumi::TestSharedSchemas::Tax._tax({"amount" => t72})
      out << t22
    end
    out
  end

  def self._order_totals(input)
    out = []
    t23 = input["orders"] || input[:orders]
    t82 = input["global_discount_rate"] || input[:global_discount_rate]
    t23.each_with_index do |orders_el_24, orders_i_25|
      t89 = orders_el_24["items"] || orders_el_24[:items]
      t86 = orders_el_24["shipping_cost"] || orders_el_24[:shipping_cost]
      t90 = Kumi::TestSharedSchemas::Subtotal._subtotal({"items" => t89})
      t87 = t90 + t86
      t83 = Kumi::TestSharedSchemas::Discount._discounted({"price" => t87, "rate" => t82})
      t93 = Kumi::TestSharedSchemas::Tax._tax({"amount" => t83})
      t28 = t83 + t93
      out << t28
    end
    out
  end

  def self._discount_per_order(input)
    out = []
    t29 = input["orders"] || input[:orders]
    t114 = input["global_discount_rate"] || input[:global_discount_rate]
    t29.each_with_index do |orders_el_30, orders_i_31|
      t110 = orders_el_30["items"] || orders_el_30[:items]
      t107 = orders_el_30["shipping_cost"] || orders_el_30[:shipping_cost]
      t111 = Kumi::TestSharedSchemas::Subtotal._subtotal({"items" => t110})
      t108 = t111 + t107
      t115 = Kumi::TestSharedSchemas::Discount._discounted({"price" => t108, "rate" => t114})
      t34 = t108 - t115
      out << t34
    end
    out
  end

  def self._total_orders(input)
    acc_35 = 0
    t36 = input["orders"] || input[:orders]
    t36.each_with_index do |orders_el_37, orders_i_38|
      t39 = orders_el_37["id"] || orders_el_37[:id]
      acc_35 += 1
    end
    acc_35
  end

  def self._total_revenue(input)
    acc_41 = 0.0
    t42 = input["orders"] || input[:orders]
    t129 = input["global_discount_rate"] || input[:global_discount_rate]
    t42.each_with_index do |orders_el_43, orders_i_44|
      t136 = orders_el_43["items"] || orders_el_43[:items]
      t133 = orders_el_43["shipping_cost"] || orders_el_43[:shipping_cost]
      t137 = Kumi::TestSharedSchemas::Subtotal._subtotal({"items" => t136})
      t134 = t137 + t133
      t130 = Kumi::TestSharedSchemas::Discount._discounted({"price" => t134, "rate" => t129})
      t140 = Kumi::TestSharedSchemas::Tax._tax({"amount" => t130})
      t126 = t130 + t140
      acc_41 += t126
    end
    acc_41
  end

  def self._total_tax_collected(input)
    acc_47 = 0.0
    t48 = input["orders"] || input[:orders]
    t157 = input["global_discount_rate"] || input[:global_discount_rate]
    t48.each_with_index do |orders_el_49, orders_i_50|
      t164 = orders_el_49["items"] || orders_el_49[:items]
      t161 = orders_el_49["shipping_cost"] || orders_el_49[:shipping_cost]
      t165 = Kumi::TestSharedSchemas::Subtotal._subtotal({"items" => t164})
      t162 = t165 + t161
      t158 = Kumi::TestSharedSchemas::Discount._discounted({"price" => t162, "rate" => t157})
      t154 = Kumi::TestSharedSchemas::Tax._tax({"amount" => t158})
      acc_47 += t154
    end
    acc_47
  end

  def self._total_discount_given(input)
    acc_53 = 0.0
    t54 = input["orders"] || input[:orders]
    t179 = input["global_discount_rate"] || input[:global_discount_rate]
    t54.each_with_index do |orders_el_55, orders_i_56|
      t175 = orders_el_55["items"] || orders_el_55[:items]
      t172 = orders_el_55["shipping_cost"] || orders_el_55[:shipping_cost]
      t176 = Kumi::TestSharedSchemas::Subtotal._subtotal({"items" => t175})
      t173 = t176 + t172
      t180 = Kumi::TestSharedSchemas::Discount._discounted({"price" => t173, "rate" => t179})
      t169 = t173 - t180
      acc_53 += t169
    end
    acc_53
  end
end
