# Autogenerated by Kumi Codegen
module Kumi::Compiled::KUMI_18db5064becd4a4342d6c7c48a3f0f9be709904986f6c53a0fd9ead2270302fc
  def self.from(input_data = nil)
    instance = Object.new
    instance.extend(self)
    instance.instance_variable_set(:@input, input_data)
    instance
  end

  def self.__kumi_executable__
    instance = Object.new
    instance.extend(self)
    instance
  end

  def update(input_data)
    @input = @input.merge(input_data)
    self
  end

  def [](name)
    case name
    when :app_name then _app_name
    when :all_flags then _all_flags
    when :server_hostnames then _server_hostnames
    when :server_count then _server_count
    when :total_ports then _total_ports
    else raise KeyError, "Unknown declaration"
    end
  end

  def _app_name(input = @input)
    t1 = input["config"] || input[:config]
    t1["app_name"] || t1[:app_name]
  end

  def _all_flags(input = @input)
    out = []
    t3 = input["config"] || input[:config]
    t4 = t3["feature_flags"] || t3[:feature_flags]
    t4.each_with_index do |feature_flags_el_5, feature_flags_i_6|
      out << feature_flags_el_5
    end
    out
  end

  def _server_hostnames(input = @input)
    out = []
    t7 = input["config"] || input[:config]
    t8 = t7["servers"] || t7[:servers]
    t8.each_with_index do |servers_el_9, servers_i_10|
      t11 = servers_el_9["hostname"] || servers_el_9[:hostname]
      out << t11
    end
    out
  end

  def _server_count(input = @input)
    t12 = input["config"] || input[:config]
    t13 = t12["servers"] || t12[:servers]
    t13.length
  end

  def _total_ports(input = @input)
    acc_15 = 0
    t16 = input["config"] || input[:config]
    t17 = t16["servers"] || t16[:servers]
    t17.each_with_index do |servers_el_18, servers_i_19|
      t20 = servers_el_18["port"] || servers_el_18[:port]
      acc_15 += t20
    end
    acc_15
  end
end
