{
  "version": "0.1",
  "module_spec": {
    "version": "0.1",
    "modname": "schema_module",
    "declarations": ["dept_total","company_total","big_team","dept_total_masked"],
    "inputs": [
      {"path":["depts"],"axes":["depts"],"dtype":"array","consumes_axes":["depts"],"accessor_name":"at_depts"},
      {
        "path": ["depts","teams"],
        "axes": ["depts","teams"],
        "dtype": "array",
        "consumes_axes": ["depts","teams"],
        "accessor_name": "at_depts_teams"
      },
      {
        "path": ["depts","teams","headcount"],
        "axes": ["depts","teams"],
        "dtype": "integer",
        "consumes_axes": ["depts","teams"],
        "accessor_name": "at_depts_teams_headcount"
      }
    ]
  },
  "declarations": {
    "dept_total": {
      "name": "dept_total",
      "axes": ["depts"],
      "parameters": [{"kind":"input","path":["depts","teams","headcount"]}],
      "result_id": 1,
      "site_schedule": {
        "max_depth": 2,
        "hoisted": [],
        "by_depth": [{"depth":0,"ops":[]},{"depth":1,"ops":[{"id":1,"kind":"reduce"}]},{"depth":2,"ops":[{"id":0,"kind":"loadinput"}]}]
      },
      "axis_carriers": [{"axis":"depts","carrier_path":["depts"],"len_call":"len_depts__via_depts(@d, idx)"}],
      "reduce_plans": [
        {
          "op_id": 1,
          "axis": "teams",
          "result_depth": 1,
          "arg_id": 0,
          "reducer_fn": "agg.sum",
          "len_call": "len_teams__via_depts_teams(@d, idx)"
        }
      ],
      "inlining_decisions": {}
    },
    "company_total": {
      "name": "company_total",
      "axes": [],
      "parameters": [{"kind":"input","path":["depts","teams","headcount"]}],
      "result_id": 2,
      "site_schedule": {
        "max_depth": 2,
        "hoisted": [{"id":2,"kind":"reduce"}],
        "by_depth": [
          {"depth":0,"ops":[{"id":2,"kind":"reduce"}]},
          {"depth":1,"ops":[{"id":1,"kind":"reduce"}]},
          {"depth":2,"ops":[{"id":0,"kind":"loadinput"}]}
        ]
      },
      "axis_carriers": [],
      "reduce_plans": [
        {
          "op_id": 1,
          "axis": "teams",
          "result_depth": 1,
          "arg_id": 0,
          "reducer_fn": "agg.sum",
          "len_call": "len_teams__via_depts_teams(@d, idx)"
        },
        {"op_id":2,"axis":"depts","result_depth":0,"arg_id":1,"reducer_fn":"agg.sum","len_call":"len_depts__via_depts(@d, idx)"}
      ],
      "inlining_decisions": {}
    },
    "big_team": {
      "name": "big_team",
      "axes": ["depts","teams"],
      "parameters": [{"kind":"input","path":["depts","teams","headcount"]}],
      "result_id": 2,
      "site_schedule": {
        "max_depth": 2,
        "hoisted": [{"id":1,"kind":"const"}],
        "by_depth": [
          {"depth":0,"ops":[{"id":1,"kind":"const"}]},
          {"depth":1,"ops":[]},
          {"depth":2,"ops":[{"id":0,"kind":"loadinput"},{"id":2,"kind":"map"}]}
        ]
      },
      "axis_carriers": [
        {"axis":"depts","carrier_path":["depts"],"len_call":"len_depts__via_depts(@d, idx)"},
        {"axis":"teams","carrier_path":["depts","teams"],"len_call":"len_teams__via_depts_teams(@d, idx)"}
      ],
      "reduce_plans": [],
      "inlining_decisions": {}
    },
    "dept_total_masked": {
      "name": "dept_total_masked",
      "axes": ["depts"],
      "parameters": [{"kind":"input","path":["depts","teams","headcount"]},{"kind":"dependency","source":"big_team"}],
      "result_id": 4,
      "site_schedule": {
        "max_depth": 2,
        "hoisted": [{"id":2,"kind":"const"}],
        "by_depth": [
          {"depth":0,"ops":[{"id":2,"kind":"const"}]},
          {"depth":1,"ops":[{"id":4,"kind":"reduce"}]},
          {"depth":2,"ops":[{"id":0,"kind":"loaddeclaration"},{"id":1,"kind":"loadinput"},{"id":3,"kind":"select"}]}
        ]
      },
      "axis_carriers": [{"axis":"depts","carrier_path":["depts"],"len_call":"len_depts__via_depts(@d, idx)"}],
      "reduce_plans": [
        {
          "op_id": 4,
          "axis": "teams",
          "result_depth": 1,
          "arg_id": 3,
          "reducer_fn": "agg.sum",
          "len_call": "len_teams__via_depts_teams(@d, idx)"
        }
      ],
      "inlining_decisions": {"big_team":"call"}
    }
  }
}