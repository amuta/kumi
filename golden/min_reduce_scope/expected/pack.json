{"bindings":{"ruby":{"kernels":[{"attrs":{"identity":0},"impl":"->(a,b) { a + b }","kernel_id":"agg.sum"},{"attrs":{},"impl":"->(a, b) { a > b }","kernel_id":"core.gt"}]}},"capabilities":{"layout":"nested_array"},"declarations":[{"axes":["depts"],"axis_carriers":[{"axis":"depts","via_path":["depts"]}],"inlining_decisions":{},"name":"dept_total","operations":[{"args":[["depts","teams","headcount"]],"attrs":{},"id":0,"op":"LoadInput"},{"args":[0],"attrs":{"axis":"teams","fn":"agg.sum"},"id":1,"op":"Reduce"}],"parameters":[{"kind":"input","path":["depts","teams","headcount"]}],"reduce_plans":[{"arg_id":0,"axis":"teams","bind_depth":0,"contrib_depth":2,"nested":false,"op_id":1,"reducer_fn":"agg.sum","reset_depth":0,"result_depth":1,"via_path":["depts","teams"]}],"result_op_id":1,"site_schedule":{"by_depth":[{"depth":0,"ops":[]},{"depth":1,"ops":[{"id":1,"kind":"reduce"}]},{"depth":2,"ops":[{"id":0,"kind":"loadinput"}]}],"hoisted_scalars":[],"max_depth":2,"root_reduces":[]}},{"axes":[],"axis_carriers":[],"inlining_decisions":{},"name":"company_total","operations":[{"args":[["depts","teams","headcount"]],"attrs":{},"id":0,"op":"LoadInput"},{"args":[0],"attrs":{"axis":"teams","fn":"agg.sum"},"id":1,"op":"Reduce"},{"args":[1],"attrs":{"axis":"depts","fn":"agg.sum"},"id":2,"op":"Reduce"}],"parameters":[{"kind":"input","path":["depts","teams","headcount"]}],"reduce_plans":[{"arg_id":0,"axis":"teams","bind_depth":0,"contrib_depth":2,"nested":false,"op_id":1,"reducer_fn":"agg.sum","reset_depth":0,"result_depth":1,"via_path":["depts","teams"]},{"arg_id":1,"axis":"depts","bind_depth":-1,"contrib_depth":0,"nested":true,"op_id":2,"reducer_fn":"agg.sum","reset_depth":-1,"result_depth":0,"via_path":["depts"]}],"result_op_id":2,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":2,"kind":"reduce"}]},{"depth":1,"ops":[{"id":1,"kind":"reduce"}]},{"depth":2,"ops":[{"id":0,"kind":"loadinput"}]}],"hoisted_scalars":[],"max_depth":2,"root_reduces":[{"id":2,"kind":"reduce"}]}},{"axes":["depts","teams"],"axis_carriers":[{"axis":"depts","via_path":["depts"]},{"axis":"teams","via_path":["depts","teams"]}],"inlining_decisions":{},"name":"big_team","operations":[{"args":[["depts","teams","headcount"]],"attrs":{},"id":0,"op":"LoadInput"},{"args":[10],"attrs":{},"id":1,"op":"Const"},{"args":[0,1],"attrs":{"fn":"core.gt"},"id":2,"op":"Map"}],"parameters":[{"kind":"input","path":["depts","teams","headcount"]}],"reduce_plans":[],"result_op_id":2,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":1,"kind":"const"}]},{"depth":1,"ops":[]},{"depth":2,"ops":[{"id":0,"kind":"loadinput"},{"id":2,"kind":"map"}]}],"hoisted_scalars":[{"id":1,"kind":"const"}],"max_depth":2,"root_reduces":[]}},{"axes":["depts"],"axis_carriers":[{"axis":"depts","via_path":["depts"]}],"inlining_decisions":{"op_0":{"decision":"inline","producer":"big_team","use_site_axes":["depts","teams"]}},"name":"dept_total_masked","operations":[{"args":["big_team"],"attrs":{},"id":0,"op":"LoadDeclaration"},{"args":[["depts","teams","headcount"]],"attrs":{},"id":1,"op":"LoadInput"},{"args":[0],"attrs":{},"id":2,"op":"Const"},{"args":[0,1,2],"attrs":{},"id":3,"op":"Select"},{"args":[3],"attrs":{"axis":"teams","fn":"agg.sum"},"id":4,"op":"Reduce"}],"parameters":[{"kind":"input","path":["depts","teams","headcount"]},{"kind":"dependency","source":"big_team"}],"reduce_plans":[{"arg_id":3,"axis":"teams","bind_depth":0,"contrib_depth":2,"nested":false,"op_id":4,"reducer_fn":"agg.sum","reset_depth":0,"result_depth":1,"via_path":["depts","teams"]}],"result_op_id":4,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":2,"kind":"const"}]},{"depth":1,"ops":[{"id":4,"kind":"reduce"}]},{"depth":2,"ops":[{"id":0,"kind":"loaddeclaration"},{"id":1,"kind":"loadinput"},{"id":3,"kind":"select"}]}],"hoisted_scalars":[{"id":2,"kind":"const"}],"max_depth":2,"root_reduces":[]}}],"hashes":{"bindings":"afe16a37162e4b64766c1e62c9335166e1ff9d711f3380ef32a06de5d4da1ae4","declarations":"a780a6bcb51c15e97e75a99d752a8cc7f7c9ec4e05fca25cf3b93cfb37d37dbf","inputs":"ff798621f7e88e6ce6be894738c2ab8c5f41eefa845dd338db08039804654799"},"inputs":[{"accessor_name":"depts","axes":[""],"axis_loops":[{"axes":"depts","key":"depts","kind":"array_field","loop_idx":0,"path":["depts"]}],"dtype":"array","leaf_nav":[],"name":"depts","path_fqn":"depts","terminal":{"dtype":"array","key_policy":"indifferent","kind":"none","on_missing":"error"}},{"accessor_name":"depts_teams","axes":["",""],"axis_loops":[{"axes":"depts","key":"depts","kind":"array_field","loop_idx":0,"path":["depts"]},{"axes":"teams","key":"teams","kind":"array_field","loop_idx":1,"path":["depts","teams"]}],"dtype":"array","leaf_nav":[],"name":"depts.teams","path_fqn":"depts.teams","terminal":{"dtype":"array","key_policy":"indifferent","kind":"none","on_missing":"error"}},{"accessor_name":"depts_teams_headcount","axes":["",""],"axis_loops":[{"axes":"depts","key":"depts","kind":"array_field","loop_idx":0,"path":["depts"]},{"axes":"teams","key":"teams","kind":"array_field","loop_idx":1,"path":["depts","teams"]}],"dtype":"integer","leaf_nav":[{"key":"headcount","kind":"field_leaf"}],"name":"depts.teams.headcount","path_fqn":"depts.teams.headcount","terminal":{"dtype":"integer","key_policy":"indifferent","kind":"none","on_missing":"error"}}],"module_id":"schema_module","pack_version":"0.1"}