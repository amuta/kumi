{"bindings":{"ruby":{"kernels":[{"impl":"->(a,b) { a + b }","kernel_id":"agg.sum"},{"impl":"->(a, b) { a > b }","kernel_id":"core.gt"}]}},"capabilities":{"layout":"nested_array"},"declarations":{"big_team":{"operations":[{"args":[["depts","teams","headcount"]],"attrs":{},"id":0,"op":"LoadInput"},{"args":[10],"attrs":{},"id":1,"op":"Const"},{"args":[0,1],"attrs":{"fn":"core.gt"},"id":2,"op":"Map"}],"result_op_id":2},"company_total":{"operations":[{"args":[["depts","teams","headcount"]],"attrs":{},"id":0,"op":"LoadInput"},{"args":[0],"attrs":{"axis":"teams","fn":"agg.sum"},"id":1,"op":"Reduce"},{"args":[1],"attrs":{"axis":"depts","fn":"agg.sum"},"id":2,"op":"Reduce"}],"result_op_id":2},"dept_total":{"operations":[{"args":[["depts","teams","headcount"]],"attrs":{},"id":0,"op":"LoadInput"},{"args":[0],"attrs":{"axis":"teams","fn":"agg.sum"},"id":1,"op":"Reduce"}],"result_op_id":1},"dept_total_masked":{"operations":[{"args":["big_team"],"attrs":{},"id":0,"op":"LoadDeclaration"},{"args":[["depts","teams","headcount"]],"attrs":{},"id":1,"op":"LoadInput"},{"args":[0],"attrs":{},"id":2,"op":"Const"},{"args":[0,1,2],"attrs":{},"id":3,"op":"Select"},{"args":[3],"attrs":{"axis":"teams","fn":"agg.sum"},"id":4,"op":"Reduce"}],"result_op_id":4}},"hashes":{"bindings":"30a0d72ec88ee01757c1654c7057f1183dc29aae6ec8cc4b390651ecf1e3257a","declarations":"a65af9de32bf544ceb67237746f6e021267e3890f4066ff4a6c60f6d91c68f16","inputs":"95ccb7df5aadfc90e63b52740208a475b02424743078f5fd761d988c405d0252","plan":"79b847752d77166f6f78d47ca560b648da524bff6204e1ce65d4731897190203"},"inputs":[{"accessor_name":"depts","axes":["depts"],"chain":[{"axis":"depts","key":"depts","kind":"array_field"}],"dtype":"array","name":"depts"},{"accessor_name":"depts_teams","axes":["depts","teams"],"chain":[{"axis":"depts","key":"depts","kind":"array_field"},{"axis":"teams","key":"teams","kind":"array_field"}],"dtype":"array","name":"depts.teams"},{"accessor_name":"depts_teams_headcount","axes":["depts","teams"],"chain":[{"axis":"depts","key":"depts","kind":"array_field"},{"axis":"teams","key":"teams","kind":"array_field"},{"key":"headcount","kind":"field_leaf"}],"dtype":"integer","name":"depts.teams.headcount"}],"module_id":"schema_module","pack_version":"0.1","plan":{"declarations":{"big_team":{"axes":["depts","teams"],"axis_carriers":[{"axis":"depts","via_path":["depts"]},{"axis":"teams","via_path":["depts","teams"]}],"inlining_decisions":{},"parameters":[{"kind":"input","path":["depts","teams","headcount"]}],"reduce_plans":[],"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":1,"kind":"const"}]},{"depth":1,"ops":[]},{"depth":2,"ops":[{"id":0,"kind":"loadinput"},{"id":2,"kind":"map"}]}],"hoisted_scalars":[{"id":1,"kind":"const"}],"max_depth":2,"root_reduces":[]}},"company_total":{"axes":[],"axis_carriers":[],"inlining_decisions":{},"parameters":[{"kind":"input","path":["depts","teams","headcount"]}],"reduce_plans":[{"arg_id":0,"axis":"teams","op_id":1,"reducer_fn":"agg.sum","result_depth":1,"via_path":["depts","teams"]},{"arg_id":1,"axis":"depts","op_id":2,"reducer_fn":"agg.sum","result_depth":0,"via_path":["depts"]}],"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":2,"kind":"reduce"}]},{"depth":1,"ops":[{"id":1,"kind":"reduce"}]},{"depth":2,"ops":[{"id":0,"kind":"loadinput"}]}],"hoisted_scalars":[],"max_depth":2,"root_reduces":[{"id":2,"kind":"reduce"}]}},"dept_total":{"axes":["depts"],"axis_carriers":[{"axis":"depts","via_path":["depts"]}],"inlining_decisions":{},"parameters":[{"kind":"input","path":["depts","teams","headcount"]}],"reduce_plans":[{"arg_id":0,"axis":"teams","op_id":1,"reducer_fn":"agg.sum","result_depth":1,"via_path":["depts","teams"]}],"site_schedule":{"by_depth":[{"depth":0,"ops":[]},{"depth":1,"ops":[{"id":1,"kind":"reduce"}]},{"depth":2,"ops":[{"id":0,"kind":"loadinput"}]}],"hoisted_scalars":[],"max_depth":2,"root_reduces":[]}},"dept_total_masked":{"axes":["depts"],"axis_carriers":[{"axis":"depts","via_path":["depts"]}],"inlining_decisions":{"op_0":{"decision":"inline","producer":"big_team","use_site_axes":["depts","teams"]}},"parameters":[{"kind":"input","path":["depts","teams","headcount"]},{"kind":"dependency","source":"big_team"}],"reduce_plans":[{"arg_id":3,"axis":"teams","op_id":4,"reducer_fn":"agg.sum","result_depth":1,"via_path":["depts","teams"]}],"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":2,"kind":"const"}]},{"depth":1,"ops":[{"id":4,"kind":"reduce"}]},{"depth":2,"ops":[{"id":0,"kind":"loaddeclaration"},{"id":1,"kind":"loadinput"},{"id":3,"kind":"select"}]}],"hoisted_scalars":[{"id":2,"kind":"const"}],"max_depth":2,"root_reduces":[]}}},"module_spec":{"inputs":[{"accessor_name":"at_depts","axes":["depts"],"consumes_axes":["depts"],"dtype":"array","path":["depts"]},{"accessor_name":"at_depts_teams","axes":["depts","teams"],"consumes_axes":["depts","teams"],"dtype":"array","path":["depts","teams"]},{"accessor_name":"at_depts_teams_headcount","axes":["depts","teams"],"consumes_axes":["depts","teams"],"dtype":"integer","path":["depts","teams","headcount"]}]}}}