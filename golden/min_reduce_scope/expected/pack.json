{"bindings":{"ruby":{"kernels":[{"attrs":{"identity":0},"impl":"->(a,b) { a + b }","kernel_id":"agg.sum"},{"attrs":{},"impl":"->(a, b) { a > b }","kernel_id":"core.gt"}]}},"capabilities":{"layout":"nested_array"},"declarations":[{"axes":["depts","teams"],"axis_carriers":[{"axis":"depts","via_path":["depts"]},{"axis":"teams","via_path":["depts","teams"]}],"inlining_decisions":{},"name":"big_team","operations":[{"args":[["depts","teams","headcount"]],"attrs":{},"id":0,"op":"LoadInput"},{"args":[10],"attrs":{},"id":1,"op":"Const"},{"args":[0,1],"attrs":{"fn":"core.gt"},"id":2,"op":"Map"}],"parameters":[{"kind":"input","path":["depts","teams","headcount"]}],"reduce_plans":[],"result_op_id":2,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":1,"kind":"const"}]},{"depth":1,"ops":[]},{"depth":2,"ops":[{"id":0,"kind":"loadinput"},{"id":2,"kind":"map"}]}],"hoisted_scalars":[{"id":1,"kind":"const"}],"max_depth":2,"root_reduces":[]}},{"axes":[],"axis_carriers":[],"inlining_decisions":{},"name":"company_total","operations":[{"args":[["depts","teams","headcount"]],"attrs":{},"id":0,"op":"LoadInput"},{"args":[0],"attrs":{"axis":"teams","fn":"agg.sum"},"id":1,"op":"Reduce"},{"args":[1],"attrs":{"axis":"depts","fn":"agg.sum"},"id":2,"op":"Reduce"}],"parameters":[{"kind":"input","path":["depts","teams","headcount"]}],"reduce_plans":[{"arg_id":0,"axis":"teams","op_id":1,"reducer_fn":"agg.sum","result_depth":1,"via_path":["depts","teams"]},{"arg_id":1,"axis":"depts","op_id":2,"reducer_fn":"agg.sum","result_depth":0,"via_path":["depts"]}],"result_op_id":2,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":2,"kind":"reduce"}]},{"depth":1,"ops":[{"id":1,"kind":"reduce"}]},{"depth":2,"ops":[{"id":0,"kind":"loadinput"}]}],"hoisted_scalars":[],"max_depth":2,"root_reduces":[{"id":2,"kind":"reduce"}]}},{"axes":["depts"],"axis_carriers":[{"axis":"depts","via_path":["depts"]}],"inlining_decisions":{},"name":"dept_total","operations":[{"args":[["depts","teams","headcount"]],"attrs":{},"id":0,"op":"LoadInput"},{"args":[0],"attrs":{"axis":"teams","fn":"agg.sum"},"id":1,"op":"Reduce"}],"parameters":[{"kind":"input","path":["depts","teams","headcount"]}],"reduce_plans":[{"arg_id":0,"axis":"teams","op_id":1,"reducer_fn":"agg.sum","result_depth":1,"via_path":["depts","teams"]}],"result_op_id":1,"site_schedule":{"by_depth":[{"depth":0,"ops":[]},{"depth":1,"ops":[{"id":1,"kind":"reduce"}]},{"depth":2,"ops":[{"id":0,"kind":"loadinput"}]}],"hoisted_scalars":[],"max_depth":2,"root_reduces":[]}},{"axes":["depts"],"axis_carriers":[{"axis":"depts","via_path":["depts"]}],"inlining_decisions":{"op_0":{"decision":"inline","producer":"big_team","use_site_axes":["depts","teams"]}},"name":"dept_total_masked","operations":[{"args":["big_team"],"attrs":{},"id":0,"op":"LoadDeclaration"},{"args":[["depts","teams","headcount"]],"attrs":{},"id":1,"op":"LoadInput"},{"args":[0],"attrs":{},"id":2,"op":"Const"},{"args":[0,1,2],"attrs":{},"id":3,"op":"Select"},{"args":[3],"attrs":{"axis":"teams","fn":"agg.sum"},"id":4,"op":"Reduce"}],"parameters":[{"kind":"input","path":["depts","teams","headcount"]},{"kind":"dependency","source":"big_team"}],"reduce_plans":[{"arg_id":3,"axis":"teams","op_id":4,"reducer_fn":"agg.sum","result_depth":1,"via_path":["depts","teams"]}],"result_op_id":4,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":2,"kind":"const"}]},{"depth":1,"ops":[{"id":4,"kind":"reduce"}]},{"depth":2,"ops":[{"id":0,"kind":"loaddeclaration"},{"id":1,"kind":"loadinput"},{"id":3,"kind":"select"}]}],"hoisted_scalars":[{"id":2,"kind":"const"}],"max_depth":2,"root_reduces":[]}}],"hashes":{"bindings":"afe16a37162e4b64766c1e62c9335166e1ff9d711f3380ef32a06de5d4da1ae4","declarations":"e2529508629293c6058f26391d4bbc4fb9485a1bcc91b54606f78e4a3d44d86a","inputs":"95ccb7df5aadfc90e63b52740208a475b02424743078f5fd761d988c405d0252"},"inputs":[{"accessor_name":"depts","axes":["depts"],"chain":[{"axis":"depts","key":"depts","kind":"array_field"}],"dtype":"array","name":"depts"},{"accessor_name":"depts_teams","axes":["depts","teams"],"chain":[{"axis":"depts","key":"depts","kind":"array_field"},{"axis":"teams","key":"teams","kind":"array_field"}],"dtype":"array","name":"depts.teams"},{"accessor_name":"depts_teams_headcount","axes":["depts","teams"],"chain":[{"axis":"depts","key":"depts","kind":"array_field"},{"axis":"teams","key":"teams","kind":"array_field"},{"key":"headcount","kind":"field_leaf"}],"dtype":"integer","name":"depts.teams.headcount"}],"module_id":"schema_module","pack_version":"0.1"}