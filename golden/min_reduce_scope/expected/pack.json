{"bindings":{"ruby":{"kernels":[{"attrs":{"identity":0},"impl":"->(a,b) { a + b }","kernel_id":"agg.sum"},{"attrs":{},"impl":"->(a, b) { a > b }","kernel_id":"core.gt"}]}},"capabilities":{"layout":"nested_array"},"declarations":[{"axes":["depts"],"axis_carriers":[{"axis":"depts","via_path":["depts"]}],"inlining_decisions":{},"name":"dept_total","operations":[{"args":[["depts","teams","headcount"]],"attrs":{},"id":0,"op":"LoadInput"},{"args":[0],"attrs":{"axis":"teams","fn":"agg.sum"},"id":1,"op":"Reduce"}],"parameters":[{"kind":"input","path":["depts","teams","headcount"]}],"reduce_plans":[{"arg_id":0,"axis":"teams","bind_depth":0,"contrib_depth":2,"nested":false,"op_id":1,"reducer_fn":"agg.sum","reset_depth":0,"result_depth":1,"via_path":["depts","teams"]}],"result_op_id":1,"site_schedule":{"by_depth":[{"depth":0,"ops":[]},{"depth":1,"ops":[{"id":1,"kind":"reduce"}]},{"depth":2,"ops":[{"id":0,"kind":"loadinput"}]}],"hoisted_scalars":[],"max_depth":2,"root_reduces":[]}},{"axes":[],"axis_carriers":[],"inlining_decisions":{},"name":"company_total","operations":[{"args":[["depts","teams","headcount"]],"attrs":{},"id":2,"op":"LoadInput"},{"args":[2],"attrs":{"axis":"teams","fn":"agg.sum"},"id":3,"op":"Reduce"},{"args":[3],"attrs":{"axis":"depts","fn":"agg.sum"},"id":4,"op":"Reduce"}],"parameters":[{"kind":"input","path":["depts","teams","headcount"]}],"reduce_plans":[{"arg_id":2,"axis":"teams","bind_depth":0,"contrib_depth":2,"nested":false,"op_id":3,"reducer_fn":"agg.sum","reset_depth":0,"result_depth":1,"via_path":["depts","teams"]},{"arg_id":3,"axis":"depts","bind_depth":-1,"contrib_depth":0,"nested":true,"op_id":4,"reducer_fn":"agg.sum","reset_depth":-1,"result_depth":0,"via_path":["depts"]}],"result_op_id":4,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":4,"kind":"reduce"}]},{"depth":1,"ops":[{"id":3,"kind":"reduce"}]},{"depth":2,"ops":[{"id":2,"kind":"loadinput"}]}],"hoisted_scalars":[],"max_depth":2,"root_reduces":[{"id":4,"kind":"reduce"}]}},{"axes":["depts","teams"],"axis_carriers":[{"axis":"depts","via_path":["depts"]},{"axis":"teams","via_path":["depts","teams"]}],"inlining_decisions":{},"name":"big_team","operations":[{"args":[["depts","teams","headcount"]],"attrs":{},"id":5,"op":"LoadInput"},{"args":[10],"attrs":{},"id":6,"op":"Const"},{"args":[5,6],"attrs":{"fn":"core.gt"},"id":7,"op":"Map"}],"parameters":[{"kind":"input","path":["depts","teams","headcount"]}],"reduce_plans":[],"result_op_id":7,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":6,"kind":"const"}]},{"depth":1,"ops":[]},{"depth":2,"ops":[{"id":5,"kind":"loadinput"},{"id":7,"kind":"map"}]}],"hoisted_scalars":[{"id":6,"kind":"const"}],"max_depth":2,"root_reduces":[]}},{"axes":["depts"],"axis_carriers":[{"axis":"depts","via_path":["depts"]}],"inlining_decisions":{"op_8":{"decision":"inline","producer":"big_team","use_site_axes":["depts","teams"]}},"name":"dept_total_masked","operations":[{"args":["big_team"],"attrs":{},"id":8,"op":"LoadDeclaration"},{"args":[["depts","teams","headcount"]],"attrs":{},"id":9,"op":"LoadInput"},{"args":[0],"attrs":{},"id":10,"op":"Const"},{"args":[8,9,10],"attrs":{},"id":11,"op":"Select"},{"args":[11],"attrs":{"axis":"teams","fn":"agg.sum"},"id":12,"op":"Reduce"}],"parameters":[{"kind":"input","path":["depts","teams","headcount"]},{"kind":"dependency","source":"big_team"}],"reduce_plans":[{"arg_id":11,"axis":"teams","bind_depth":0,"contrib_depth":2,"nested":false,"op_id":12,"reducer_fn":"agg.sum","reset_depth":0,"result_depth":1,"via_path":["depts","teams"]}],"result_op_id":12,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":10,"kind":"const"}]},{"depth":1,"ops":[{"id":12,"kind":"reduce"}]},{"depth":2,"ops":[{"id":8,"kind":"loaddeclaration"},{"id":9,"kind":"loadinput"},{"id":11,"kind":"select"}]}],"hoisted_scalars":[{"id":10,"kind":"const"}],"max_depth":2,"root_reduces":[]}}],"hashes":{"bindings":"afe16a37162e4b64766c1e62c9335166e1ff9d711f3380ef32a06de5d4da1ae4","declarations":"02d5f9ffea6d56c4575867638cb059ae97a5f9bcbbd590a5ede0a1cba1de59f2","inputs":"5c5fc55e99e9d032f2b6aa2724bfb55b8e404b9268fd1e9c12abf8fd1a00e104"},"inputs":[{"accessor_name":"depts","axes":["depts"],"navigation_steps":[{"axes":"depts","key":"depts","kind":"array_field","loop_idx":0,"path":["depts"]}],"dtype":"array","leaf_nav":[],"name":"depts","path_fqn":"depts","terminal":{"dtype":"array","key_policy":"indifferent","kind":"none","on_missing":"error"}},{"accessor_name":"depts_teams","axes":["depts","teams"],"navigation_steps":[{"axes":"depts","key":"depts","kind":"array_field","loop_idx":0,"path":["depts"]},{"axes":"teams","key":"teams","kind":"array_field","loop_idx":1,"path":["depts","teams"]}],"dtype":"array","leaf_nav":[],"name":"depts.teams","path_fqn":"depts.teams","terminal":{"dtype":"array","key_policy":"indifferent","kind":"none","on_missing":"error"}},{"accessor_name":"depts_teams_headcount","axes":["depts","teams"],"navigation_steps":[{"axes":"depts","key":"depts","kind":"array_field","loop_idx":0,"path":["depts"]},{"axes":"teams","key":"teams","kind":"array_field","loop_idx":1,"path":["depts","teams"]}],"dtype":"integer","leaf_nav":[{"key":"headcount","kind":"field_leaf"}],"name":"depts.teams.headcount","path_fqn":"depts.teams.headcount","terminal":{"dtype":"integer","key_policy":"indifferent","kind":"none","on_missing":"error"}}],"module_id":"schema_module","pack_version":"0.1"}