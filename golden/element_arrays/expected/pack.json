{"bindings":{"ruby":{"kernels":[{"impl":"->(a, b) { a > b }","kernel_id":"core.gt"},{"impl":"->(a,b) { a + b }","kernel_id":"agg.sum"}]}},"capabilities":{"layout":"nested_array"},"declarations":{"cell":{"operations":[{"args":[["cube","layer","row","cell"]],"attrs":{},"id":0,"op":"LoadInput"}],"result_op_id":0},"cell_over_limit":{"operations":[{"args":[["cube","layer","row","cell"]],"attrs":{},"id":0,"op":"LoadInput"},{"args":[100],"attrs":{},"id":1,"op":"Const"},{"args":[0,1],"attrs":{"fn":"core.gt"},"id":2,"op":"Map"}],"result_op_id":2},"cell_sum":{"operations":[{"args":["cell_over_limit"],"attrs":{},"id":0,"op":"LoadDeclaration"},{"args":[["cube","layer","row","cell"]],"attrs":{},"id":1,"op":"LoadInput"},{"args":[0],"attrs":{},"id":2,"op":"Const"},{"args":[0,1,2],"attrs":{},"id":3,"op":"Select"},{"args":[3],"attrs":{"axis":"row","fn":"agg.sum"},"id":4,"op":"Reduce"}],"result_op_id":4},"count_over_limit":{"operations":[{"args":["cell_over_limit"],"attrs":{},"id":0,"op":"LoadDeclaration"},{"args":[1],"attrs":{},"id":1,"op":"Const"},{"args":[0],"attrs":{},"id":2,"op":"Const"},{"args":[0,1,2],"attrs":{},"id":3,"op":"Select"},{"args":[3],"attrs":{"axis":"row","fn":"agg.sum"},"id":4,"op":"Reduce"},{"args":[4],"attrs":{"axis":"layer","fn":"agg.sum"},"id":5,"op":"Reduce"},{"args":[5],"attrs":{"axis":"cube","fn":"agg.sum"},"id":6,"op":"Reduce"}],"result_op_id":6},"cube":{"operations":[{"args":[["cube"]],"attrs":{},"id":0,"op":"LoadInput"}],"result_op_id":0},"layer":{"operations":[{"args":[["cube","layer"]],"attrs":{},"id":0,"op":"LoadInput"}],"result_op_id":0},"row":{"operations":[{"args":[["cube","layer","row"]],"attrs":{},"id":0,"op":"LoadInput"}],"result_op_id":0}},"hashes":{"bindings":"f428308d484d07f4e3ebb03b75d71494a4c9b991b6d7cf8a168e2f20fe28ffb4","declarations":"e5bb1b0ec71662fcbd368e85345672cd9970770f501465c02be609e0bcfde267","inputs":"855bb2591854da72a60a0c682d65bf5d9ee6ac9b4ebbf8957a511d897e0ce74f","plan":"86d470e5a2345ca230734c0ab3d4c11c508571367444ad6b06a0612f182cf46c"},"inputs":[{"accessor_name":"cube","axes":["cube"],"chain":[{"axis":"cube","key":"cube","kind":"array_field"}],"dtype":"array","name":"cube"},{"accessor_name":"cube_layer","axes":["cube","layer"],"chain":[{"axis":"cube","key":"cube","kind":"array_field"},{"alias":"layer","axis":"layer","kind":"array_element"}],"dtype":"array","name":"cube.layer"},{"accessor_name":"cube_layer_row","axes":["cube","layer","row"],"chain":[{"axis":"cube","key":"cube","kind":"array_field"},{"alias":"layer","axis":"layer","kind":"array_element"},{"alias":"row","axis":"row","kind":"array_element"}],"dtype":"array","name":"cube.layer.row"},{"accessor_name":"cube_layer_row_cell","axes":["cube","layer","row"],"chain":[{"axis":"cube","key":"cube","kind":"array_field"},{"alias":"layer","axis":"layer","kind":"array_element"},{"alias":"row","axis":"row","kind":"array_element"},{"kind":"element_leaf"}],"dtype":"integer","name":"cube.layer.row.cell"}],"module_id":"schema_module","pack_version":"0.1","plan":{"declarations":{"cell":{"axes":["cube","layer","row"],"axis_carriers":[{"axis":"cube","via_path":["cube"]},{"axis":"layer","via_path":["cube","layer"]},{"axis":"row","via_path":["cube","layer","row"]}],"inlining_decisions":{},"parameters":[{"kind":"input","path":["cube","layer","row","cell"]}],"reduce_plans":[],"site_schedule":{"by_depth":[{"depth":0,"ops":[]},{"depth":1,"ops":[]},{"depth":2,"ops":[]},{"depth":3,"ops":[{"id":0,"kind":"loadinput"}]}],"hoisted_scalars":[],"max_depth":3,"root_reduces":[]}},"cell_over_limit":{"axes":["cube","layer","row"],"axis_carriers":[{"axis":"cube","via_path":["cube"]},{"axis":"layer","via_path":["cube","layer"]},{"axis":"row","via_path":["cube","layer","row"]}],"inlining_decisions":{},"parameters":[{"kind":"input","path":["cube","layer","row","cell"]}],"reduce_plans":[],"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":1,"kind":"const"}]},{"depth":1,"ops":[]},{"depth":2,"ops":[]},{"depth":3,"ops":[{"id":0,"kind":"loadinput"},{"id":2,"kind":"map"}]}],"hoisted_scalars":[{"id":1,"kind":"const"}],"max_depth":3,"root_reduces":[]}},"cell_sum":{"axes":["cube","layer"],"axis_carriers":[{"axis":"cube","via_path":["cube"]},{"axis":"layer","via_path":["cube","layer"]}],"inlining_decisions":{"op_0":{"decision":"inline","producer":"cell_over_limit","use_site_axes":["cube","layer","row"]}},"parameters":[{"kind":"input","path":["cube","layer","row","cell"]},{"kind":"dependency","source":"cell_over_limit"}],"reduce_plans":[{"arg_id":3,"axis":"row","op_id":4,"reducer_fn":"agg.sum","result_depth":2,"via_path":["cube","layer","row"]}],"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":2,"kind":"const"}]},{"depth":1,"ops":[]},{"depth":2,"ops":[{"id":4,"kind":"reduce"}]},{"depth":3,"ops":[{"id":0,"kind":"loaddeclaration"},{"id":1,"kind":"loadinput"},{"id":3,"kind":"select"}]}],"hoisted_scalars":[{"id":2,"kind":"const"}],"max_depth":3,"root_reduces":[]}},"count_over_limit":{"axes":[],"axis_carriers":[],"inlining_decisions":{"op_0":{"decision":"inline","producer":"cell_over_limit","use_site_axes":["cube","layer","row"]}},"parameters":[{"kind":"dependency","source":"cell_over_limit"}],"reduce_plans":[{"arg_id":3,"axis":"row","op_id":4,"reducer_fn":"agg.sum","result_depth":2,"via_path":["cube","layer","row"]},{"arg_id":4,"axis":"layer","op_id":5,"reducer_fn":"agg.sum","result_depth":1,"via_path":["cube","layer"]},{"arg_id":5,"axis":"cube","op_id":6,"reducer_fn":"agg.sum","result_depth":0,"via_path":["cube"]}],"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":1,"kind":"const"},{"id":2,"kind":"const"},{"id":6,"kind":"reduce"}]},{"depth":1,"ops":[{"id":5,"kind":"reduce"}]},{"depth":2,"ops":[{"id":4,"kind":"reduce"}]},{"depth":3,"ops":[{"id":0,"kind":"loaddeclaration"},{"id":3,"kind":"select"}]}],"hoisted_scalars":[{"id":1,"kind":"const"},{"id":2,"kind":"const"}],"max_depth":3,"root_reduces":[{"id":6,"kind":"reduce"}]}},"cube":{"axes":["cube"],"axis_carriers":[{"axis":"cube","via_path":["cube"]}],"inlining_decisions":{},"parameters":[{"kind":"input","path":["cube"]}],"reduce_plans":[],"site_schedule":{"by_depth":[{"depth":0,"ops":[]},{"depth":1,"ops":[{"id":0,"kind":"loadinput"}]}],"hoisted_scalars":[],"max_depth":1,"root_reduces":[]}},"layer":{"axes":["cube","layer"],"axis_carriers":[{"axis":"cube","via_path":["cube"]},{"axis":"layer","via_path":["cube","layer"]}],"inlining_decisions":{},"parameters":[{"kind":"input","path":["cube","layer"]}],"reduce_plans":[],"site_schedule":{"by_depth":[{"depth":0,"ops":[]},{"depth":1,"ops":[]},{"depth":2,"ops":[{"id":0,"kind":"loadinput"}]}],"hoisted_scalars":[],"max_depth":2,"root_reduces":[]}},"row":{"axes":["cube","layer","row"],"axis_carriers":[{"axis":"cube","via_path":["cube"]},{"axis":"layer","via_path":["cube","layer"]},{"axis":"row","via_path":["cube","layer","row"]}],"inlining_decisions":{},"parameters":[{"kind":"input","path":["cube","layer","row"]}],"reduce_plans":[],"site_schedule":{"by_depth":[{"depth":0,"ops":[]},{"depth":1,"ops":[]},{"depth":2,"ops":[]},{"depth":3,"ops":[{"id":0,"kind":"loadinput"}]}],"hoisted_scalars":[],"max_depth":3,"root_reduces":[]}}},"module_spec":{"inputs":[{"accessor_name":"at_cube","axes":["cube"],"consumes_axes":["cube"],"dtype":"array","path":["cube"]},{"accessor_name":"at_cube_layer","axes":["cube","layer"],"consumes_axes":["cube","layer"],"dtype":"array","path":["cube","layer"]},{"accessor_name":"at_cube_layer_row","axes":["cube","layer","row"],"consumes_axes":["cube","layer","row"],"dtype":"array","path":["cube","layer","row"]},{"accessor_name":"at_cube_layer_row_cell","axes":["cube","layer","row"],"consumes_axes":["cube","layer","row"],"dtype":"integer","path":["cube","layer","row","cell"]}]}}}