{"bindings":{"ruby":{"kernels":[{"attrs":{},"impl":"->(a, b) { a > b }","kernel_id":"core.gt"},{"attrs":{"identity":0},"impl":"->(a,b) { a + b }","kernel_id":"agg.sum"}]}},"capabilities":{"layout":"nested_array"},"declarations":[{"axes":["cube"],"axis_carriers":[{"axis":"cube","via_path":["cube"]}],"inlining_decisions":{},"name":"cube","operations":[{"args":[["cube"]],"attrs":{},"id":0,"op":"LoadInput"}],"parameters":[{"kind":"input","path":["cube"]}],"reduce_plans":[],"result_op_id":0,"site_schedule":{"by_depth":[{"depth":0,"ops":[]},{"depth":1,"ops":[{"id":0,"kind":"loadinput"}]}],"hoisted_scalars":[],"max_depth":1,"root_reduces":[]}},{"axes":["cube","layer"],"axis_carriers":[{"axis":"cube","via_path":["cube"]},{"axis":"layer","via_path":["cube","layer"]}],"inlining_decisions":{},"name":"layer","operations":[{"args":[["cube","layer"]],"attrs":{},"id":1,"op":"LoadInput"}],"parameters":[{"kind":"input","path":["cube","layer"]}],"reduce_plans":[],"result_op_id":1,"site_schedule":{"by_depth":[{"depth":0,"ops":[]},{"depth":1,"ops":[]},{"depth":2,"ops":[{"id":1,"kind":"loadinput"}]}],"hoisted_scalars":[],"max_depth":2,"root_reduces":[]}},{"axes":["cube","layer","row"],"axis_carriers":[{"axis":"cube","via_path":["cube"]},{"axis":"layer","via_path":["cube","layer"]},{"axis":"row","via_path":["cube","layer","row"]}],"inlining_decisions":{},"name":"row","operations":[{"args":[["cube","layer","row"]],"attrs":{},"id":2,"op":"LoadInput"}],"parameters":[{"kind":"input","path":["cube","layer","row"]}],"reduce_plans":[],"result_op_id":2,"site_schedule":{"by_depth":[{"depth":0,"ops":[]},{"depth":1,"ops":[]},{"depth":2,"ops":[]},{"depth":3,"ops":[{"id":2,"kind":"loadinput"}]}],"hoisted_scalars":[],"max_depth":3,"root_reduces":[]}},{"axes":["cube","layer","row"],"axis_carriers":[{"axis":"cube","via_path":["cube"]},{"axis":"layer","via_path":["cube","layer"]},{"axis":"row","via_path":["cube","layer","row"]}],"inlining_decisions":{},"name":"cell","operations":[{"args":[["cube","layer","row","cell"]],"attrs":{},"id":3,"op":"LoadInput"}],"parameters":[{"kind":"input","path":["cube","layer","row","cell"]}],"reduce_plans":[],"result_op_id":3,"site_schedule":{"by_depth":[{"depth":0,"ops":[]},{"depth":1,"ops":[]},{"depth":2,"ops":[]},{"depth":3,"ops":[{"id":3,"kind":"loadinput"}]}],"hoisted_scalars":[],"max_depth":3,"root_reduces":[]}},{"axes":["cube","layer","row"],"axis_carriers":[{"axis":"cube","via_path":["cube"]},{"axis":"layer","via_path":["cube","layer"]},{"axis":"row","via_path":["cube","layer","row"]}],"inlining_decisions":{},"name":"cell_over_limit","operations":[{"args":[["cube","layer","row","cell"]],"attrs":{},"id":4,"op":"LoadInput"},{"args":[100],"attrs":{},"id":5,"op":"Const"},{"args":[4,5],"attrs":{"fn":"core.gt"},"id":6,"op":"Map"}],"parameters":[{"kind":"input","path":["cube","layer","row","cell"]}],"reduce_plans":[],"result_op_id":6,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":5,"kind":"const"}]},{"depth":1,"ops":[]},{"depth":2,"ops":[]},{"depth":3,"ops":[{"id":4,"kind":"loadinput"},{"id":6,"kind":"map"}]}],"hoisted_scalars":[{"id":5,"kind":"const"}],"max_depth":3,"root_reduces":[]}},{"axes":["cube","layer"],"axis_carriers":[{"axis":"cube","via_path":["cube"]},{"axis":"layer","via_path":["cube","layer"]}],"inlining_decisions":{"op_7":{"decision":"inline","producer":"cell_over_limit","use_site_axes":["cube","layer","row"]}},"name":"cell_sum","operations":[{"args":["cell_over_limit"],"attrs":{},"id":7,"op":"LoadDeclaration"},{"args":[["cube","layer","row","cell"]],"attrs":{},"id":8,"op":"LoadInput"},{"args":[0],"attrs":{},"id":9,"op":"Const"},{"args":[7,8,9],"attrs":{},"id":10,"op":"Select"},{"args":[10],"attrs":{"axis":"row","fn":"agg.sum"},"id":11,"op":"Reduce"}],"parameters":[{"kind":"input","path":["cube","layer","row","cell"]},{"kind":"dependency","source":"cell_over_limit"}],"reduce_plans":[{"arg_id":10,"axis":"row","bind_depth":1,"contrib_depth":3,"nested":false,"op_id":11,"reducer_fn":"agg.sum","reset_depth":1,"result_depth":2,"via_path":["cube","layer","row"]}],"result_op_id":11,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":9,"kind":"const"}]},{"depth":1,"ops":[]},{"depth":2,"ops":[{"id":11,"kind":"reduce"}]},{"depth":3,"ops":[{"id":7,"kind":"loaddeclaration"},{"id":8,"kind":"loadinput"},{"id":10,"kind":"select"}]}],"hoisted_scalars":[{"id":9,"kind":"const"}],"max_depth":3,"root_reduces":[]}},{"axes":[],"axis_carriers":[],"inlining_decisions":{"op_12":{"decision":"inline","producer":"cell_over_limit","use_site_axes":["cube","layer","row"]}},"name":"count_over_limit","operations":[{"args":["cell_over_limit"],"attrs":{},"id":12,"op":"LoadDeclaration"},{"args":[1],"attrs":{},"id":13,"op":"Const"},{"args":[0],"attrs":{},"id":14,"op":"Const"},{"args":[12,13,14],"attrs":{},"id":15,"op":"Select"},{"args":[15],"attrs":{"axis":"row","fn":"agg.sum"},"id":16,"op":"Reduce"},{"args":[16],"attrs":{"axis":"layer","fn":"agg.sum"},"id":17,"op":"Reduce"},{"args":[17],"attrs":{"axis":"cube","fn":"agg.sum"},"id":18,"op":"Reduce"}],"parameters":[{"kind":"dependency","source":"cell_over_limit"}],"reduce_plans":[{"arg_id":15,"axis":"row","bind_depth":1,"contrib_depth":3,"nested":false,"op_id":16,"reducer_fn":"agg.sum","reset_depth":1,"result_depth":2,"via_path":["cube","layer","row"]},{"arg_id":16,"axis":"layer","bind_depth":0,"contrib_depth":1,"nested":true,"op_id":17,"reducer_fn":"agg.sum","reset_depth":0,"result_depth":1,"via_path":["cube","layer"]},{"arg_id":17,"axis":"cube","bind_depth":-1,"contrib_depth":0,"nested":true,"op_id":18,"reducer_fn":"agg.sum","reset_depth":-1,"result_depth":0,"via_path":["cube"]}],"result_op_id":18,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":13,"kind":"const"},{"id":14,"kind":"const"},{"id":18,"kind":"reduce"}]},{"depth":1,"ops":[{"id":17,"kind":"reduce"}]},{"depth":2,"ops":[{"id":16,"kind":"reduce"}]},{"depth":3,"ops":[{"id":12,"kind":"loaddeclaration"},{"id":15,"kind":"select"}]}],"hoisted_scalars":[{"id":13,"kind":"const"},{"id":14,"kind":"const"}],"max_depth":3,"root_reduces":[{"id":18,"kind":"reduce"}]}}],"hashes":{"bindings":"7b0c3825a5325b3606a4a4a0cfd529e4c603cda03c1c5bbc473d8eef8c055597","declarations":"ec0d980a55483df151a319632a2667a11be2c976c03ec78a79f178a9fc529957","inputs":"9229a92c0194d2e87b299873465851c4f35e447fcae59c33cbe09653deec14ee"},"inputs":[{"accessor_name":"cube","axes":["cube"],"navigation_steps":[{"axes":"cube","key":"cube","kind":"array_field","loop_idx":0,"path":["cube"]}],"dtype":"array","leaf_nav":[],"name":"cube","path_fqn":"cube","terminal":{"dtype":"array","key_policy":"indifferent","kind":"none","on_missing":"error"}},{"accessor_name":"cube_layer","axes":["cube","layer"],"navigation_steps":[{"axes":"cube","key":"cube","kind":"array_field","loop_idx":0,"path":["cube"]},{"alias":"layer","axes":"layer","kind":"array_element","loop_idx":1,"path":["cube","layer"]}],"dtype":"array","leaf_nav":[],"name":"cube.layer","path_fqn":"cube.layer","terminal":{"dtype":"array","key_policy":"indifferent","kind":"none","on_missing":"error"}},{"accessor_name":"cube_layer_row","axes":["cube","layer","row"],"navigation_steps":[{"axes":"cube","key":"cube","kind":"array_field","loop_idx":0,"path":["cube"]},{"alias":"layer","axes":"layer","kind":"array_element","loop_idx":1,"path":["cube","layer"]},{"alias":"row","axes":"row","kind":"array_element","loop_idx":2,"path":["cube","layer","row"]}],"dtype":"array","leaf_nav":[],"name":"cube.layer.row","path_fqn":"cube.layer.row","terminal":{"dtype":"array","key_policy":"indifferent","kind":"none","on_missing":"error"}},{"accessor_name":"cube_layer_row_cell","axes":["cube","layer","row"],"navigation_steps":[{"axes":"cube","key":"cube","kind":"array_field","loop_idx":0,"path":["cube"]},{"alias":"layer","axes":"layer","kind":"array_element","loop_idx":1,"path":["cube","layer"]},{"alias":"row","axes":"row","kind":"array_element","loop_idx":2,"path":["cube","layer","row"]}],"dtype":"integer","leaf_nav":[],"name":"cube.layer.row.cell","path_fqn":"cube.layer.row.cell","terminal":{"dtype":"integer","key_policy":"indifferent","kind":"element_leaf","on_missing":"error"}}],"module_id":"schema_module","pack_version":"0.1"}