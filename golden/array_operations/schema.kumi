schema do
  input do
    array :items do
      hash :item do
        float :price
        integer :quantity
        string :category
      end
    end
    float :tax_rate
  end

  value :subtotals, input.items.item.price * input.items.item.quantity
  trait :expensive_items, input.items.item.price > 100.0
  trait :electronics, input.items.item.category == "electronics"

  value :discounted_price, input.items.item.price * 0.9
  value :is_valid_quantity, input.items.item.quantity > 0
end
