# Autogenerated by Kumi Codegen
module Kumi::Compiled::KUMI_081c0955c3a297c9c443fe43d8f227b147f997c81f776e1cbd7118fe1e0aa3ad
  def self._next_state(input)
    out = []
    t285 = input["rows"] || input[:rows]
    t1548 = t285.length
    t1556 = t1548 - 1
    t285.each_with_index do |rows_el_286, rows_i_287|
      out_1 = []
      t1550 = rows_i_287 - -1
      t1570 = rows_i_287 - 1
      t1589 = rows_i_287 % t1548
      t1552 = t1550 >= 0
      t1553 = t1550 < t1548
      t1558 = t1550.clamp(0, t1556)
      t1572 = t1570 >= 0
      t1573 = t1570 < t1548
      t1578 = t1570.clamp(0, t1556)
      t1590 = t1589 + t1548
      t1554 = t1552 && t1553
      t1559 = t285[t1558]
      t1574 = t1572 && t1573
      t1579 = t285[t1578]
      t1591 = t1590 % t1548
      t1560 = t1559.length
      t1580 = t1579.length
      t1592 = t285[t1591]
      t1593 = t1592.length
      t1649 = t1560 - 1
      t1705 = t1580 - 1
      t1601 = t1593 - 1
      rows_el_286.each_with_index do |col_el_288, col_i_289|
        t1561 = col_i_289 % t1560
        t1562 = t1561 + t1560
        t1563 = t1562 % t1560
        t1564 = t1559[t1563]
        t1566 = t1554 ? t1564 : 0
        t1581 = col_i_289 % t1580
        t1582 = t1581 + t1580
        t1583 = t1582 % t1580
        t1584 = t1579[t1583]
        t1586 = t1574 ? t1584 : 0
        t1595 = col_i_289 - -1
        t1597 = t1595 >= 0
        t1598 = t1595 < t1593
        t1599 = t1597 && t1598
        t1603 = t1595.clamp(0, t1601)
        t1604 = t1592[t1603]
        t1606 = t1599 ? t1604 : 0
        t1615 = col_i_289 - 1
        t1617 = t1615 >= 0
        t1618 = t1615 < t1593
        t1619 = t1617 && t1618
        t1623 = t1615.clamp(0, t1601)
        t1624 = t1592[t1623]
        t1626 = t1619 ? t1624 : 0
        t1645 = t1595 < t1560
        t1646 = t1597 && t1645
        t1647 = t1554 && t1646
        t1651 = t1595.clamp(0, t1649)
        t1652 = t1559[t1651]
        t1654 = t1647 ? t1652 : 0
        t1673 = t1615 < t1560
        t1674 = t1617 && t1673
        t1675 = t1554 && t1674
        t1679 = t1615.clamp(0, t1649)
        t1680 = t1559[t1679]
        t1682 = t1675 ? t1680 : 0
        t1701 = t1595 < t1580
        t1702 = t1597 && t1701
        t1703 = t1574 && t1702
        t1707 = t1595.clamp(0, t1705)
        t1708 = t1579[t1707]
        t1710 = t1703 ? t1708 : 0
        t1729 = t1615 < t1580
        t1730 = t1617 && t1729
        t1731 = t1574 && t1730
        t1735 = t1615.clamp(0, t1705)
        t1736 = t1579[t1735]
        t1738 = t1731 ? t1736 : 0
        t1545 = [t1566, t1586, t1606, t1626, t1654, t1682, t1710, t1738]
        t1546 = t1545.sum
        t1535 = t1546 == 3
        t1746 = t1546 == 2
        t1953 = col_el_288 > 0
        t1742 = t1746 && t1953
        t1531 = t1535 || t1742
        t293 = t1531 ? 1 : 0
        out_1 << t293
      end
      out << out_1
    end
    out
  end
end
