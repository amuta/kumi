(Root
  inputs: [
    (InputDeclaration :departments :array
      [
        (InputDeclaration :dept :hash
          [
            (InputDeclaration :name :string)
            (InputDeclaration :employees :array
              [
                (InputDeclaration :emp :hash
                  [
                    (InputDeclaration :salary :integer)
                    (InputDeclaration :role :string)
                  ]
                )
              ]
            )
          ]
        )
      ]
    )
  ]
  values: [
    (ValueDeclaration :total_payroll
      (CallExpression :sum
        (InputElementReference departments.dept.employees.emp.salary)
      )
    )
    (ValueDeclaration :manager_count
      (CallExpression :count_if
        (InputElementReference departments.dept.employees.emp.role)
        (Literal "manager")
      )
    )
    (ValueDeclaration :senior_employee_count
      (CallExpression :count_if
        (InputElementReference departments.dept.employees.emp.role)
        (Literal "senior")
      )
    )
    (ValueDeclaration :max_salary
      (CallExpression :max
        (InputElementReference departments.dept.employees.emp.salary)
      )
    )
    (ValueDeclaration :department_summary
      (HashExpression
        ((Literal :name) (InputElementReference departments.dept.name))
        ((Literal :total_payroll) (DeclarationReference :total_payroll))
        ((Literal :manager_count) (DeclarationReference :manager_count))
        ((Literal :senior_count) (DeclarationReference :senior_employee_count))
        ((Literal :top_salary) (DeclarationReference :max_salary))
      )
    )
  ]
  traits: []
)