# Autogenerated by Kumi Codegen
module Kumi::Compiled::KUMI_0cf02b28c0be789af2b82f1ba35f220da829c032a18d5f22ef65219f0ff385f0
  def self._total_payroll(input)
    out = []
    t1 = input["departments"] || input[:departments]
    t1.each_with_index do |departments_el_2, departments_i_3|
      acc_4 = 0
      t5 = departments_el_2["employees"] || departments_el_2[:employees]
      t5.each_with_index do |employees_el_6, employees_i_7|
        t8 = employees_el_6["salary"] || employees_el_6[:salary]
        acc_4 += t8
      end
      t9 = acc_4
      out << t9
    end
    out
  end

  def self._manager_count(input)
    out = []
    t10 = input["departments"] || input[:departments]
    t10.each_with_index do |departments_el_11, departments_i_12|
      acc_13 = 0
      t14 = departments_el_11["employees"] || departments_el_11[:employees]
      t14.each_with_index do |employees_el_15, employees_i_16|
        t17 = employees_el_15["role"] || employees_el_15[:role]
        t19 = t17 == "manager"
        t22 = t19 ? 1 : 0
        acc_13 += t22
      end
      t23 = acc_13
      out << t23
    end
    out
  end

  def self._senior_employee_count(input)
    out = []
    t24 = input["departments"] || input[:departments]
    t24.each_with_index do |departments_el_25, departments_i_26|
      acc_27 = 0
      t28 = departments_el_25["employees"] || departments_el_25[:employees]
      t28.each_with_index do |employees_el_29, employees_i_30|
        t31 = employees_el_29["role"] || employees_el_29[:role]
        t33 = t31 == "senior"
        t36 = t33 ? 1 : 0
        acc_27 += t36
      end
      t37 = acc_27
      out << t37
    end
    out
  end

  def self._max_salary(input)
    out = []
    t38 = input["departments"] || input[:departments]
    t38.each_with_index do |departments_el_39, departments_i_40|
      acc_41 = nil
      t42 = departments_el_39["employees"] || departments_el_39[:employees]
      t42.each_with_index do |employees_el_43, employees_i_44|
        t45 = employees_el_43["salary"] || employees_el_43[:salary]
        acc_41 ||= t45
        acc_41 = t45 if t45 > acc_41
      end
      t46 = acc_41
      out << t46
    end
    out
  end

  def self._department_summary(input)
    out = []
    t47 = input["departments"] || input[:departments]
    t47.each_with_index do |departments_el_48, departments_i_49|
      t50 = departments_el_48["name"] || departments_el_48[:name]
      acc58 = 0
      t59 = departments_el_48["employees"] || departments_el_48[:employees]
      acc66 = 0
      acc79 = 0
      acc92 = nil
      t59.each_with_index do |t60, t61|
        t62 = t60["salary"] || t60[:salary]
        acc58 += t62
        t70 = t60["role"] || t60[:role]
        t72 = t70 == "manager"
        t75 = t72 ? 1 : 0
        acc66 += t75
        acc92 ||= t62
        acc92 = t62 if t62 > acc92
        t85 = t70 == "senior"
        t88 = t85 ? 1 : 0
        acc79 += t88
      end
      t63 = acc58
      t76 = acc66
      t97 = acc92
      t89 = acc79
      t55 = {
        "name" => t50,
        "total_payroll" => t63,
        "manager_count" => t76,
        "senior_count" => t89,
        "top_salary" => t97
      }
      out << t55
    end
    out
  end
end
