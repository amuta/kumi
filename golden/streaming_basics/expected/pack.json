{"bindings":{},"capabilities":{"layout":"nested_array"},"hashes":{"bindings":"44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a","inputs":"4f53cda18c2baa0c0354bb5f9a3ecbe5ed12ab4d8e11ba873c2f11161202b945","ops_by_decl":"805bc1267eab7f40457db05625925a79c4358569dbd98ae7ee91b0da5ada76ee","plan":"addbdd049a683d3917ab90988186d5fd1e10e32985fd06a7136c1a46e3e02fda"},"inputs":[],"module_id":"schema_module","ops_by_decl":{"cart_total":{"operations":[{"args":["items_subtotal"],"attrs":{},"id":0,"op":"LoadDeclaration"},{"args":[0],"attrs":{"axis":"items","fn":"agg.sum"},"id":1,"op":"Reduce"}],"result":1},"cart_total_effective":{"operations":[{"args":["items_effective"],"attrs":{},"id":0,"op":"LoadDeclaration"},{"args":[0],"attrs":{"axis":"items","fn":"agg.sum"},"id":1,"op":"Reduce"}],"result":1},"items_discounted":{"operations":[{"args":[["items","price"]],"attrs":{},"id":0,"op":"LoadInput"},{"args":[1.0],"attrs":{},"id":1,"op":"Const"},{"args":[["discount"]],"attrs":{},"id":2,"op":"LoadInput"},{"args":[1,2],"attrs":{"fn":"core.sub"},"id":3,"op":"Map"},{"args":[0,3],"attrs":{"fn":"core.mul"},"id":4,"op":"Map"}],"result":4},"items_effective":{"operations":[{"args":["items_is_big"],"attrs":{},"id":0,"op":"LoadDeclaration"},{"args":["items_subtotal"],"attrs":{},"id":1,"op":"LoadDeclaration"},{"args":[0.9],"attrs":{},"id":2,"op":"Const"},{"args":[1,2],"attrs":{"fn":"core.mul"},"id":3,"op":"Map"},{"args":[0,3,1],"attrs":{},"id":5,"op":"Select"}],"result":5},"items_is_big":{"operations":[{"args":[["items","price"]],"attrs":{},"id":0,"op":"LoadInput"},{"args":[100.0],"attrs":{},"id":1,"op":"Const"},{"args":[0,1],"attrs":{"fn":"core.gt"},"id":2,"op":"Map"}],"result":2},"items_subtotal":{"operations":[{"args":[["items","price"]],"attrs":{},"id":0,"op":"LoadInput"},{"args":[["items","qty"]],"attrs":{},"id":1,"op":"LoadInput"},{"args":[0,1],"attrs":{"fn":"core.mul"},"id":2,"op":"Map"}],"result":2},"total_qty":{"operations":[{"args":[["items","qty"]],"attrs":{},"id":0,"op":"LoadInput"},{"args":[0],"attrs":{"axis":"items","fn":"agg.sum"},"id":1,"op":"Reduce"}],"result":1}},"pack_version":"0.1","plan":{"declarations":{"cart_total":{"axes":[],"axis_carriers":[],"inlining_decisions":{"op_0":{"decision":"inline","producer":"items_subtotal","use_site_axes":["items"]}},"name":"cart_total","parameters":[{"kind":"dependency","source":"items_subtotal"}],"reduce_plans":[{"arg_id":0,"axis":"items","op_id":0,"reducer_fn":"agg.sum","result_depth":0,"via_path":["items"]}],"result_id":1,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":1,"kind":"reduce"}]},{"depth":1,"ops":[{"id":0,"kind":"loaddeclaration"}]}],"hoisted_scalars":[],"max_depth":1,"root_reduces":[{"id":1,"kind":"reduce"}]}},"cart_total_effective":{"axes":[],"axis_carriers":[],"inlining_decisions":{"op_0":{"decision":"inline","producer":"items_effective","use_site_axes":["items"]}},"name":"cart_total_effective","parameters":[{"kind":"dependency","source":"items_effective"}],"reduce_plans":[{"arg_id":0,"axis":"items","op_id":0,"reducer_fn":"agg.sum","result_depth":0,"via_path":["items"]}],"result_id":1,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":1,"kind":"reduce"}]},{"depth":1,"ops":[{"id":0,"kind":"loaddeclaration"}]}],"hoisted_scalars":[],"max_depth":1,"root_reduces":[{"id":1,"kind":"reduce"}]}},"items_discounted":{"axes":["items"],"axis_carriers":[{"axis":"items","via_path":["items"]}],"inlining_decisions":{},"name":"items_discounted","parameters":[{"kind":"input","path":["items","price"]},{"kind":"input","path":["discount"]}],"reduce_plans":[],"result_id":4,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":1,"kind":"const"},{"id":2,"kind":"loadinput"},{"id":3,"kind":"map"}]},{"depth":1,"ops":[{"id":0,"kind":"loadinput"},{"id":4,"kind":"map"}]}],"hoisted_scalars":[{"id":1,"kind":"const"},{"id":2,"kind":"loadinput"},{"id":3,"kind":"map"}],"max_depth":1,"root_reduces":[]}},"items_effective":{"axes":["items"],"axis_carriers":[{"axis":"items","via_path":["items"]}],"inlining_decisions":{"op_0":{"decision":"inline","producer":"items_is_big","use_site_axes":["items"]},"op_1":{"decision":"inline","producer":"items_subtotal","use_site_axes":["items"]}},"name":"items_effective","parameters":[{"kind":"dependency","source":"items_is_big"},{"kind":"dependency","source":"items_subtotal"}],"reduce_plans":[],"result_id":5,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":2,"kind":"const"}]},{"depth":1,"ops":[{"id":0,"kind":"loaddeclaration"},{"id":1,"kind":"loaddeclaration"},{"id":3,"kind":"map"},{"id":5,"kind":"select"}]}],"hoisted_scalars":[{"id":2,"kind":"const"}],"max_depth":1,"root_reduces":[]}},"items_is_big":{"axes":["items"],"axis_carriers":[{"axis":"items","via_path":["items"]}],"inlining_decisions":{},"name":"items_is_big","parameters":[{"kind":"input","path":["items","price"]}],"reduce_plans":[],"result_id":2,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":1,"kind":"const"}]},{"depth":1,"ops":[{"id":0,"kind":"loadinput"},{"id":2,"kind":"map"}]}],"hoisted_scalars":[{"id":1,"kind":"const"}],"max_depth":1,"root_reduces":[]}},"items_subtotal":{"axes":["items"],"axis_carriers":[{"axis":"items","via_path":["items"]}],"inlining_decisions":{},"name":"items_subtotal","parameters":[{"kind":"input","path":["items","price"]},{"kind":"input","path":["items","qty"]}],"reduce_plans":[],"result_id":2,"site_schedule":{"by_depth":[{"depth":0,"ops":[]},{"depth":1,"ops":[{"id":0,"kind":"loadinput"},{"id":1,"kind":"loadinput"},{"id":2,"kind":"map"}]}],"hoisted_scalars":[],"max_depth":1,"root_reduces":[]}},"total_qty":{"axes":[],"axis_carriers":[],"inlining_decisions":{},"name":"total_qty","parameters":[{"kind":"input","path":["items","qty"]}],"reduce_plans":[{"arg_id":0,"axis":"items","op_id":0,"reducer_fn":"agg.sum","result_depth":0,"via_path":["items"]}],"result_id":1,"site_schedule":{"by_depth":[{"depth":0,"ops":[{"id":1,"kind":"reduce"}]},{"depth":1,"ops":[{"id":0,"kind":"loadinput"}]}],"hoisted_scalars":[],"max_depth":1,"root_reduces":[{"id":1,"kind":"reduce"}]}}},"module_spec":{"declarations":["items_subtotal","items_discounted","items_is_big","items_effective","total_qty","cart_total","cart_total_effective"],"inputs":[{"accessor_name":"at_items","axes":["items"],"consumes_axes":["items"],"dtype":"array","path":["items"]},{"accessor_name":"at_items_price","axes":["items"],"consumes_axes":["items"],"dtype":"float","path":["items","price"]},{"accessor_name":"at_items_qty","axes":["items"],"consumes_axes":["items"],"dtype":"integer","path":["items","qty"]},{"accessor_name":"at_discount","axes":[],"consumes_axes":[],"dtype":"float","path":["discount"]}],"modname":"schema_module","version":"0.1"},"version":"0.1"}}