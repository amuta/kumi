{
  "version": "0.1",
  "module": "schema_module",
  "declarations": {
    "per_order_qty_sum": {
      "name": "per_order_qty_sum",
      "parameters": [{"kind":"input","path":["orders","items","qty"]}],
      "operations": [
        {"id":0,"op":"LoadInput","args":[["orders","items","qty"]],"stamp":{"dtype":"integer","axes":["orders","items"]}},
        {"id":1,"op":"Reduce","args":[0],"stamp":{"dtype":"integer","axes":["orders"]},"attrs":{"fn":"agg.sum","axis":"items"}}
      ],
      "result": 1
    },
    "order_item_flags": {
      "name": "order_item_flags",
      "parameters": [{"kind":"input","path":["orders","items","qty"]}],
      "operations": [
        {"id":0,"op":"LoadInput","args":[["orders","items","qty"]],"stamp":{"dtype":"integer","axes":["orders","items"]}},
        {"id":1,"op":"Const","args":[0],"stamp":{"dtype":"integer","axes":[]}},
        {"id":2,"op":"Map","args":[0,1],"stamp":{"dtype":"boolean","axes":["orders","items"]},"attrs":{"fn":"core.gt"}}
      ],
      "result": 2
    }
  },
  "analysis": {
    "defaults": {"key_policy":"indifferent","on_missing":"error"},
    "inputs": [
      {
        "path": ["orders"],
        "axes": ["orders"],
        "dtype": "array",
        "key_policy": "indifferent",
        "on_missing": "error",
        "chain": [{"kind":"array_field","key":"orders","axis":"orders"}]
      },
      {
        "path": ["orders","items"],
        "axes": ["orders","items"],
        "dtype": "array",
        "key_policy": "indifferent",
        "on_missing": "error",
        "chain": [{"kind":"array_field","key":"orders","axis":"orders"},{"kind":"array_field","key":"items","axis":"items"}]
      },
      {
        "path": ["orders","items","qty"],
        "axes": ["orders","items"],
        "dtype": "integer",
        "key_policy": "indifferent",
        "on_missing": "error",
        "chain": [
          {"kind":"array_field","key":"orders","axis":"orders"},
          {"kind":"array_field","key":"items","axis":"items"},
          {"kind":"field_leaf","key":"qty"}
        ]
      },
      {
        "path": ["inventory"],
        "axes": ["inventory"],
        "dtype": "array",
        "key_policy": "indifferent",
        "on_missing": "error",
        "chain": [{"kind":"array_field","key":"inventory","axis":"inventory"}]
      },
      {
        "path": ["inventory","items"],
        "axes": ["inventory","items"],
        "dtype": "array",
        "key_policy": "indifferent",
        "on_missing": "error",
        "chain": [{"kind":"array_field","key":"inventory","axis":"inventory"},{"kind":"array_field","key":"items","axis":"items"}]
      },
      {
        "path": ["inventory","items","sku"],
        "axes": ["inventory","items"],
        "dtype": "integer",
        "key_policy": "indifferent",
        "on_missing": "error",
        "chain": [
          {"kind":"array_field","key":"inventory","axis":"inventory"},
          {"kind":"array_field","key":"items","axis":"items"},
          {"kind":"field_leaf","key":"sku"}
        ]
      }
    ]
  }
}