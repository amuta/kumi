schema do
  import :tax, from: Kumi::TestSharedSchemas::Tax

  input do
    array :items do
      hash :item do
        decimal :amount
      end
    end
  end

  value :item_taxes, tax(amount: input.items.item.amount)
  value :total_tax, fn(:sum, item_taxes)
end
