# Autogenerated by Kumi Codegen
module Kumi::Compiled::KUMI_a18a6a2fd789094cd70340b2bb9ba7e6f1eac60ff3f1d95d456e09963d00fbd5
  def self._total_payroll(input)
    out = []
    t1 = input["departments"] || input[:departments]
    t1.each_with_index do |departments_el_2, departments_i_3|
      acc_4 = 0
      t5 = departments_el_2["employees"] || departments_el_2[:employees]
      t5.each_with_index do |employees_el_6, employees_i_7|
        t8 = employees_el_6["salary"] || employees_el_6[:salary]
        acc_4 += t8
      end
      t9 = acc_4
      out << t9
    end
    out
  end

  def self._manager_count(input)
    out = []
    t10 = input["departments"] || input[:departments]
    t18 = "manager"
    t20 = 1
    t21 = 0
    t10.each_with_index do |departments_el_11, departments_i_12|
      acc_13 = 0
      t14 = departments_el_11["employees"] || departments_el_11[:employees]
      t14.each_with_index do |employees_el_15, employees_i_16|
        t17 = employees_el_15["role"] || employees_el_15[:role]
        t19 = t17 == t18
        t22 = t19 ? t20 : t21
        acc_13 += t22
      end
      t23 = acc_13
      out << t23
    end
    out
  end

  def self._department_summary(input)
    out = []
    t24 = input["departments"] || input[:departments]
    t46 = "manager"
    t48 = 1
    t49 = 0
    t24.each_with_index do |departments_el_25, departments_i_26|
      t27 = departments_el_25["name"] || departments_el_25[:name]
      acc33 = 0
      t34 = departments_el_25["employees"] || departments_el_25[:employees]
      acc41 = 0
      t34.each_with_index do |t35, t36|
        t37 = t35["salary"] || t35[:salary]
        acc33 += t37
        t45 = t35["role"] || t35[:role]
        t47 = t45 == t46
        t50 = t47 ? t48 : t49
        acc41 += t50
      end
      t38 = acc33
      t51 = acc41
      t30 = {
        "name" => t27,
        "total_payroll" => t38,
        "manager_count" => t51
      }
      out << t30
    end
    out
  end
end
