{
  "version": "0.1",
  "module": "schema_module",
  "declarations": {
    "high_performer": {
      "name": "high_performer",
      "parameters": [{"kind":"input","path":["regions","offices","teams","employees","rating"]}],
      "operations": [
        {
          "id": 0,
          "op": "LoadInput",
          "args": [["regions","offices","teams","employees","rating"]],
          "stamp": {"dtype":"float","axes":["regions","offices","teams","employees"]}
        },
        {"id":1,"op":"Const","args":[4.5],"stamp":{"dtype":"float","axes":[]}},
        {
          "id": 2,
          "op": "Map",
          "args": [0,1],
          "stamp": {"dtype":"boolean","axes":["regions","offices","teams","employees"]},
          "attrs": {"fn":"core.gte"}
        }
      ],
      "result": 2
    },
    "senior_level": {
      "name": "senior_level",
      "parameters": [{"kind":"input","path":["regions","offices","teams","employees","level"]}],
      "operations": [
        {
          "id": 3,
          "op": "LoadInput",
          "args": [["regions","offices","teams","employees","level"]],
          "stamp": {"dtype":"string","axes":["regions","offices","teams","employees"]}
        },
        {"id":4,"op":"Const","args":["senior"],"stamp":{"dtype":"string","axes":[]}},
        {
          "id": 5,
          "op": "Map",
          "args": [3,4],
          "stamp": {"dtype":"boolean","axes":["regions","offices","teams","employees"]},
          "attrs": {"fn":"core.eq"}
        }
      ],
      "result": 5
    },
    "top_team": {
      "name": "top_team",
      "parameters": [{"kind":"input","path":["regions","offices","teams","performance_score"]}],
      "operations": [
        {
          "id": 6,
          "op": "LoadInput",
          "args": [["regions","offices","teams","performance_score"]],
          "stamp": {"dtype":"float","axes":["regions","offices","teams"]}
        },
        {"id":7,"op":"Const","args":[0.9],"stamp":{"dtype":"float","axes":[]}},
        {
          "id": 8,
          "op": "Map",
          "args": [6,7],
          "stamp": {"dtype":"boolean","axes":["regions","offices","teams"]},
          "attrs": {"fn":"core.gte"}
        }
      ],
      "result": 8
    },
    "employee_bonus": {
      "name": "employee_bonus",
      "parameters": [
        {"kind":"input","path":["regions","offices","teams","employees","salary"]},
        {"kind":"dependency","source":"high_performer"},
        {"kind":"dependency","source":"senior_level"},
        {"kind":"dependency","source":"top_team"}
      ],
      "operations": [
        {
          "id": 9,
          "op": "LoadDeclaration",
          "args": ["high_performer"],
          "stamp": {"dtype":"boolean","axes":["regions","offices","teams","employees"]}
        },
        {
          "id": 10,
          "op": "LoadDeclaration",
          "args": ["senior_level"],
          "stamp": {"dtype":"boolean","axes":["regions","offices","teams","employees"]}
        },
        {"id":11,"op":"LoadDeclaration","args":["top_team"],"stamp":{"dtype":"boolean","axes":["regions","offices","teams"]}},
        {
          "id": 12,
          "op": "Map",
          "args": [10,11],
          "stamp": {"dtype":"boolean","axes":["regions","offices","teams","employees"]},
          "attrs": {"fn":"core.and"}
        },
        {
          "id": 13,
          "op": "Map",
          "args": [9,12],
          "stamp": {"dtype":"boolean","axes":["regions","offices","teams","employees"]},
          "attrs": {"fn":"core.and"}
        },
        {
          "id": 14,
          "op": "LoadInput",
          "args": [["regions","offices","teams","employees","salary"]],
          "stamp": {"dtype":"float","axes":["regions","offices","teams","employees"]}
        },
        {"id":15,"op":"Const","args":[0.3],"stamp":{"dtype":"float","axes":[]}},
        {
          "id": 16,
          "op": "Map",
          "args": [14,15],
          "stamp": {"dtype":"float","axes":["regions","offices","teams","employees"]},
          "attrs": {"fn":"core.mul"}
        },
        {
          "id": 17,
          "op": "LoadDeclaration",
          "args": ["high_performer"],
          "stamp": {"dtype":"boolean","axes":["regions","offices","teams","employees"]}
        },
        {"id":18,"op":"LoadDeclaration","args":["top_team"],"stamp":{"dtype":"boolean","axes":["regions","offices","teams"]}},
        {
          "id": 19,
          "op": "Map",
          "args": [17,18],
          "stamp": {"dtype":"boolean","axes":["regions","offices","teams","employees"]},
          "attrs": {"fn":"core.and"}
        },
        {"id":20,"op":"Const","args":[0.2],"stamp":{"dtype":"float","axes":[]}},
        {
          "id": 21,
          "op": "Map",
          "args": [14,20],
          "stamp": {"dtype":"float","axes":["regions","offices","teams","employees"]},
          "attrs": {"fn":"core.mul"}
        },
        {"id":22,"op":"Const","args":[0.05],"stamp":{"dtype":"float","axes":[]}},
        {
          "id": 23,
          "op": "Map",
          "args": [14,22],
          "stamp": {"dtype":"float","axes":["regions","offices","teams","employees"]},
          "attrs": {"fn":"core.mul"}
        },
        {"id":24,"op":"Select","args":[19,21,23],"stamp":{"dtype":"float","axes":["regions","offices","teams","employees"]}},
        {"id":25,"op":"Select","args":[13,16,24],"stamp":{"dtype":"float","axes":["regions","offices","teams","employees"]}}
      ],
      "result": 25
    }
  },
  "analysis": {
    "defaults": {"key_policy":"indifferent","on_missing":"error"},
    "inputs": [
      {
        "path": ["regions"],
        "axes": ["regions"],
        "dtype": "array",
        "key_policy": "indifferent",
        "on_missing": "error",
        "navigation_steps": [{"axes":"regions","path":["regions"],"loop_idx":0,"kind":"array_field","key":"regions"}],
        "leaf_nav": [],
        "terminal": {"kind":"none","dtype":"array","key_policy":"indifferent","on_missing":"error"},
        "path_fqn": "regions"
      },
      {
        "path": ["regions","offices"],
        "axes": ["regions","offices"],
        "dtype": "array",
        "key_policy": "indifferent",
        "on_missing": "error",
        "navigation_steps": [
          {"axes":"regions","path":["regions"],"loop_idx":0,"kind":"array_field","key":"regions"},
          {"axes":"offices","path":["regions","offices"],"loop_idx":1,"kind":"array_field","key":"offices"}
        ],
        "leaf_nav": [],
        "terminal": {"kind":"none","dtype":"array","key_policy":"indifferent","on_missing":"error"},
        "path_fqn": "regions.offices"
      },
      {
        "path": ["regions","offices","teams"],
        "axes": ["regions","offices","teams"],
        "dtype": "array",
        "key_policy": "indifferent",
        "on_missing": "error",
        "navigation_steps": [
          {"axes":"regions","path":["regions"],"loop_idx":0,"kind":"array_field","key":"regions"},
          {"axes":"offices","path":["regions","offices"],"loop_idx":1,"kind":"array_field","key":"offices"},
          {"axes":"teams","path":["regions","offices","teams"],"loop_idx":2,"kind":"array_field","key":"teams"}
        ],
        "leaf_nav": [],
        "terminal": {"kind":"none","dtype":"array","key_policy":"indifferent","on_missing":"error"},
        "path_fqn": "regions.offices.teams"
      },
      {
        "path": ["regions","offices","teams","employees"],
        "axes": ["regions","offices","teams","employees"],
        "dtype": "array",
        "key_policy": "indifferent",
        "on_missing": "error",
        "navigation_steps": [
          {"axes":"regions","path":["regions"],"loop_idx":0,"kind":"array_field","key":"regions"},
          {"axes":"offices","path":["regions","offices"],"loop_idx":1,"kind":"array_field","key":"offices"},
          {"axes":"teams","path":["regions","offices","teams"],"loop_idx":2,"kind":"array_field","key":"teams"},
          {
            "axes": "employees",
            "path": ["regions","offices","teams","employees"],
            "loop_idx": 3,
            "kind": "array_field",
            "key": "employees"
          }
        ],
        "leaf_nav": [],
        "terminal": {"kind":"none","dtype":"array","key_policy":"indifferent","on_missing":"error"},
        "path_fqn": "regions.offices.teams.employees"
      },
      {
        "path": ["regions","offices","teams","employees","level"],
        "axes": ["regions","offices","teams","employees"],
        "dtype": "string",
        "key_policy": "indifferent",
        "on_missing": "error",
        "navigation_steps": [
          {"axes":"regions","path":["regions"],"loop_idx":0,"kind":"array_field","key":"regions"},
          {"axes":"offices","path":["regions","offices"],"loop_idx":1,"kind":"array_field","key":"offices"},
          {"axes":"teams","path":["regions","offices","teams"],"loop_idx":2,"kind":"array_field","key":"teams"},
          {
            "axes": "employees",
            "path": ["regions","offices","teams","employees"],
            "loop_idx": 3,
            "kind": "array_field",
            "key": "employees"
          }
        ],
        "leaf_nav": [{"kind":"field_leaf","key":"level"}],
        "terminal": {"kind":"none","dtype":"string","key_policy":"indifferent","on_missing":"error"},
        "path_fqn": "regions.offices.teams.employees.level"
      },
      {
        "path": ["regions","offices","teams","employees","rating"],
        "axes": ["regions","offices","teams","employees"],
        "dtype": "float",
        "key_policy": "indifferent",
        "on_missing": "error",
        "navigation_steps": [
          {"axes":"regions","path":["regions"],"loop_idx":0,"kind":"array_field","key":"regions"},
          {"axes":"offices","path":["regions","offices"],"loop_idx":1,"kind":"array_field","key":"offices"},
          {"axes":"teams","path":["regions","offices","teams"],"loop_idx":2,"kind":"array_field","key":"teams"},
          {
            "axes": "employees",
            "path": ["regions","offices","teams","employees"],
            "loop_idx": 3,
            "kind": "array_field",
            "key": "employees"
          }
        ],
        "leaf_nav": [{"kind":"field_leaf","key":"rating"}],
        "terminal": {"kind":"none","dtype":"float","key_policy":"indifferent","on_missing":"error"},
        "path_fqn": "regions.offices.teams.employees.rating"
      },
      {
        "path": ["regions","offices","teams","employees","salary"],
        "axes": ["regions","offices","teams","employees"],
        "dtype": "float",
        "key_policy": "indifferent",
        "on_missing": "error",
        "navigation_steps": [
          {"axes":"regions","path":["regions"],"loop_idx":0,"kind":"array_field","key":"regions"},
          {"axes":"offices","path":["regions","offices"],"loop_idx":1,"kind":"array_field","key":"offices"},
          {"axes":"teams","path":["regions","offices","teams"],"loop_idx":2,"kind":"array_field","key":"teams"},
          {
            "axes": "employees",
            "path": ["regions","offices","teams","employees"],
            "loop_idx": 3,
            "kind": "array_field",
            "key": "employees"
          }
        ],
        "leaf_nav": [{"kind":"field_leaf","key":"salary"}],
        "terminal": {"kind":"none","dtype":"float","key_policy":"indifferent","on_missing":"error"},
        "path_fqn": "regions.offices.teams.employees.salary"
      },
      {
        "path": ["regions","offices","teams","performance_score"],
        "axes": ["regions","offices","teams"],
        "dtype": "float",
        "key_policy": "indifferent",
        "on_missing": "error",
        "navigation_steps": [
          {"axes":"regions","path":["regions"],"loop_idx":0,"kind":"array_field","key":"regions"},
          {"axes":"offices","path":["regions","offices"],"loop_idx":1,"kind":"array_field","key":"offices"},
          {"axes":"teams","path":["regions","offices","teams"],"loop_idx":2,"kind":"array_field","key":"teams"}
        ],
        "leaf_nav": [{"kind":"field_leaf","key":"performance_score"}],
        "terminal": {"kind":"none","dtype":"float","key_policy":"indifferent","on_missing":"error"},
        "path_fqn": "regions.offices.teams.performance_score"
      }
    ]
  }
}